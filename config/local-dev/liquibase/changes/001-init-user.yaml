databaseChangeLog:
  - changeSet:
      id: 001-create-app-user
      author: lmo
      changes:
        - sql:
            sql: |
              CREATE ROLE eventstream_rw;
              GRANT USAGE ON SCHEMA eventstream TO eventstream_rw;
              ALTER DEFAULT PRIVILEGES IN SCHEMA eventstream
              GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO eventstream_rw;
              
              -- use environment variable for password, see docker-compose.yaml
              CREATE USER eventstream_app WITH PASSWORD '${EVENTSTREAM_APP_PASSWORD}';

              ALTER ROLE eventstream_app SET search_path TO eventstream;
              GRANT eventstream_rw TO eventstream_app;
